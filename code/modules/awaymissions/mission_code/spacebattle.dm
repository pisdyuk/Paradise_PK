//Spacebattle Areas

/area/awaymission/spacebattle
	name = "\improper Space Battle"
	icon_state = "away"
	requires_power = TRUE
	report_alerts = FALSE

/area/awaymission/spacebattle/cruiser
	name = "\improper Nanotrasen Cruiser"

/area/awaymission/spacebattle/syndicate1
	name = "\improper Syndicate Assault Ship 1"

/area/awaymission/spacebattle/syndicate2
	name = "\improper Syndicate Assault Ship 2"

/area/awaymission/spacebattle/syndicate3
	name = "\improper Syndicate Assault Ship 3"

/area/awaymission/spacebattle/syndicate4
	name = "\improper Syndicate War Sphere 1"

/area/awaymission/spacebattle/syndicate5
	name = "\improper Syndicate War Sphere 2"

/area/awaymission/spacebattle/syndicate6
	name = "\improper Syndicate War Sphere 3"

/area/awaymission/spacebattle/syndicate7
	name = "\improper Syndicate Fighter"

/area/awaymission/spacebattle/secret
	name = "\improper Hidden Chamber"

/area/awaymission/spacebattle/prhallway1
	name = "\improper Primary Hallway"

/area/awaymission/spacebattle/prhallway2
	name = "\improper Primary Hallway"

/area/awaymission/spacebattle/prhallway3
	name = "\improper Primary Hallway"
	fire = TRUE

/area/awaymission/spacebattle/prhallway4
	name = "\improper Primary Hallway"

/area/awaymission/spacebattle/prhallway5
	name = "\improper Primary Hallway"

/area/awaymission/spacebattle/prhallway6
	name = "\improper Primary Hallway"

/area/awaymission/spacebattle/prhallway7
	name = "\improper Primary Hallway"

/area/awaymission/spacebattle/kitchen
	name = "\improper Kitchen"

/area/awaymission/spacebattle/medbay
	name = "\improper MedBay"

/area/awaymission/spacebattle/freezing
	name = "\improper Freezing Room"

/area/awaymission/spacebattle/server
	name = "\improper Server Room"

/area/awaymission/spacebattle/bridge
	name = "\improper Bridge"

/area/awaymission/spacebattle/space_exit1
	name = "\improper Space Exit"

/area/awaymission/spacebattle/space_exit2
	name = "\improper Space Exit"

/area/awaymission/spacebattle/space_exit3
	name = "\improper Space Exit"

/area/awaymission/spacebattle/space_exit4
	name = "\improper Space Exit"

/area/awaymission/spacebattle/space_exit5
	name = "\improper Space Exit"

/area/awaymission/spacebattle/hallway1
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway2
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway3
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway4
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway5
	name = "\improper Hallway"
	fire = TRUE

/area/awaymission/spacebattle/hallway6
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway7
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway8
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway9
	name = "\improper Hallway"
	fire = TRUE

/area/awaymission/spacebattle/hallway10
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway11
	name = "\improper Hallway"
	fire = TRUE

/area/awaymission/spacebattle/hallway12
	name = "\improper Hallway"
	fire = TRUE

/area/awaymission/spacebattle/hallway13
	name = "\improper Hallway"

/area/awaymission/spacebattle/hallway14
	name = "\improper Hallway"

/area/awaymission/spacebattle/engine
	name = "\improper Engine Room"

/area/awaymission/spacebattle/engineering
	name = "\improper Engineering"
	fire = TRUE

/area/awaymission/spacebattle/storage
	name = "\improper Storage"

/area/awaymission/spacebattle/living
	name = "\improper Living Room"
	fire = TRUE

/area/awaymission/spacebattle/turret1
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret2
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret3
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret4
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret5
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret6
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret7
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret8
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret9
	name = "\improper Turret Room"

/area/awaymission/spacebattle/turret10
	name = "\improper Turret Room"

/area/awaymission/spacebattle/bsa
	name = "\improper BSA Chamber"

/area/awaymission/spacebattle/sec_storage
	name = "\improper Secure Storage"

// Записочки

/obj/item/paper/spacebattle
	icon = 'icons/obj/bureaucracy.dmi';
	icon_state = "paper_words"

/obj/item/paper/spacebattle/syndicate1
	info = "<p>- Какого черта это было?<br> - Группа, стоп... Сейчас свяжусь с этим кораблем.<br> - Провожу сканирование...<br> ...<br> ...<br> - Это корабль НТ! Полная боевая!<br> - Сканеры показывают большое число турелей, подавите турели.<br> ...<br> - Абордажным командам занять поды!<br> - Все готовы?<br> - Так точно!<br> - Запускайте поды!</p>"

/obj/item/paper/spacebattle/syndicate2
	info = "<p>- Всем носителям - выпускайте дроны.<br> - Принял. Дроны пошли.<br> ...<br> - Это носитель DC-28... Агхх... Обшивка сильно повреждена, запрос эвакуации.<br> - Принято, DC-28, отправляем под на ваши координаты.<br> ...<br> ...<br> - Твою мать, у них есть БСА! Они только что разнесли под.<br> - Сканирование не обнаружило орудие.<br> - Дьявол, несем потери.<br> ...</p>"

/obj/item/paper/spacebattle/syndicate3
	info = "<p>- Птичка-4, прием, мы на корабле, действуем согласно плану дельта-1.<br> - Альфа, якорь пристыкован, активируем через 5, сейчас тряхнет.<br> - 10-4.<br> ...<br> ...<br> ...<br> - Птичка-4, прием, экипаж уничтожен. У них на корабле гребаный БСА!<br> - Альфа, ищите любые ценные документы.<br> - Принято.<br> ...</p>"

/obj/item/paper/crumpled/bloody/spacebattle/mechanic // Механик правого борта
	info = "<p> <i> Я бортовой механик NanoTrasen, состоящий в экипаже засекреченного крейсера 'Безымянный'. Если вы это читаете - я мертв. <br> Несколько часов назад наша экспедиция отправилась на тестирование экспериментальной установки, начальство говорило, что она использует какой-то 'блюспейс' - передовую технологию. Хрен его знает что за голубое пространство, но видать оно очень ценно. <br> После выстрела этой бандуры нас так тряхануло, что датчики взбесились - считали, что мы пересекли несколько десятков секторов, а календари показывали чуть ли не на 200 лет позже. <br> Судно атаковали пираты, мы пытались отбится, но их слишком много. Думаю, что все остальные мертвы. Я забаррикадировался у себя в отсеке, ворота на палубу достаточно крепкие, пока есть время - попытаюсь собрать челнок. <br> Нет ядра для челнока, чёрт, думаю есть шанс, что на мастерской левого борта будет хотя бы одно. <br> Кажется, они догадались, что тех.тоннель ведет ко мне, надо рвать когти, пан или пропал.</i> </p>"

/obj/item/paper/crumpled/bloody/spacebattle/officer // Офицер в туалете
	info = "<p> <center> <large> <b> РАПОРТ </b> </large> </center> <br> Лейтенант ТСФ Дребин, докладываю: 'Безымянный' под обстрелом, нас взяли на абордаж. После затяжного боя на палубах крейсера мы, видимо, проиграли... К черту эту корпортивную чушь! Мы притащили на борт крысу! Какая то сволочь точно слила наши координаты, ведь мы пробовали какую-то огромную пушку - они точно пришли за ней, только я не успел найти эту сволочь! Меня ранили... протяну от силы не больше часа, мед у нас отбили почти сразу, как сука знали! Я выберусь отсюда, я не умру в туале </p>"

/obj/item/paper/spacebattle/kitchen // Желе в холодильнике
	info = "<p> от Кока Рэмси <br> Капитану 'Безымянного' <br> <br> Капитан, после выстрела из вашей погремушки у меня в холодильнике завелся вредитель! Я открыл холодильник, а там на меня смотрело желе! Я не готовил это сраное желе! ОНО СМОТРИТ НА МЕНЯ! <br> Прошу, пришлите кого-то, хотя бы яйцеголовых, я не могу работать, КОГДА НА МЕНЯ СМОТРИТ ЭТО! </p>"

/obj/item/paper/spacebattle/bridge // Задача на вылет крейсера
	info = "<p> <grid> </td> <tr> <td> <img src = ntlogo.png> <td> <table> </td> <tr> <td> <small> Форма NanoTrasen NT-<b>CC</b>-REQ </small> <br> <small>Станция — <b>Центральное командование</b> </small> <br> <small>Год: 2367</small> <br> <center> <large> <b> Распоряжение Центрального командования </b> </large> </center> </i> </grid> <hr> <br> Командование судна 'Безымянный', ваш крейсер был оснащен экспериментальной установкой под кодовым именем БСА - рассекречивание наличия данной установки, принципов её работы и любые упоминания о её существование вне экипажа и высшего командования строго запрещены! <br> <b> Ваша задача: </b> После полного прочтения данных директив, совершить вылет из системы, после чего будут получены координаты <b> засекреченного </b> испытательного полигона для тестирования данной установки. Требуется произвести минимум 3 выстрела с рассчетным интервалом в 30-40 минут, что обуславливает время необходимое для заряда батарей установки от экспериментального двигателя, использующего осколок суперматерии. Последний выстрел необходимо произвести во время сверхсветового скачка на максимально возможной скорости. Затем вернутся в док с соответствующей отчетной документацией для получения новых распоряжений. <br> <small> <i> <br>Подпись: ███████ ████████ </i>,   в должности: <i>NanoTrasen Navy Officer.</i> </small> <br> <hr> <small> *Несоблюдение указаний, содержащихся в данном документе, считается нарушением политики компании; Дисциплинарное взыскание за нарушения может быть применено на месте или в конце смены в Центральном командовании;<br>*Получатель(и) данного меморандума подтверждает(ют), что он(она/они) несут ответственность за любой ущерб, который может возникнуть в результате игнорирования приведенных здесь директив или рекомендаций;<br>*Все отчеты должны храниться конфиденциально их предполагаемым получателем и любой соответствующей стороной. Несанкционированное распространение данного меморандума может привести к дисциплинарным взысканиям.</small> </p>"

/obj/item/paper/check/spacebattle/bridge2 //Бортовой журнал
	info = "<p> <grid> </td> <tr> <td> <img src = ntlogo.png> <td> <table> </td> <tr> <td> <small> Форма NanoTrasen NT-<b>COM</b>-BB </small> <br> <small>Судно — <b>ЭКН 'Безымянный'</b> </small>     <small>Год: 2367</small> <br> <i> <large> <b> Бортовой журнал </b> </large> </i> </grid> <hr> <br> <i>██.03.2367</i> - Вылет. Док №2, ИОН ███████, █████ спутник планеты █████ системы ███████ ██████-█. <br> <i>██.03.2367</i> - Прибыли на координаты ████, ████, ██ - ████████, планета ████████, система ██████████-███. <br> <i>██.03.2367</i> - Начато испытание установки ███. <br> <i>██.03.2367</i> - Произведен залп из ███ по мишени №1. Переход к мишени №2. <br> <i>██.03.2367</i> - Произведен залп из ███ по мишени №2. Переход к задаче №3. Запуск сверхсветовых двигателей. <br> <i>██.03.2367</i> - Произведен залп из ███ во время сверхсветовоого скачка при достижении нагрузки на ССД двигатели = 95% <br> <i>██.̴̼̝̐͌͠0̴͓̦̝͘͝͠6̴̡̦͙͐̓̐.̴͉̘͙̓͛͊2̴͓͒̔̈́͜4̴͙͎͊͌͌͜6̵̞̟̘̈́́̚7̴̙͉̝̓̐͘</i> -̵͓͇̾̐̚͜ О̴͍̟͓̽̒͘б̴̢̪͍͒͋̈́н̴̠̼̪̒̿́а̴̢͉͕͛͐͝р̵̢͓́̈́у̴̫̟̓̾̚͜ж̴̝̞̽̀̚е̸̡͎̦͌̓͐н̸͉̦̞͋͊͘ с̵̺͖̞͛̀͝б̴̦͔͍̒͛͋о̸̠̟́̒̿й̴̢̘͙͆̚͝ с̵̡̺͉̒̚̚ӥ̸͖͓͍́͒͆с̴̙͎͉͒͌͑т̴͓̫͊̀͜е̴͓͖͎͒͛̀м̸̺̼͐̈́̾ы̵̞̪͋͐̕͜.̸͔̝͖́͆̀ О̸̡̫̼̾͑͘б̸̺̦͊͜͠͠р̸̢̺͚̕͝͝а̵͇̟͇͐̐͋т̵̟̪͛͘͘͜и̴̢͎͙͐̾т̴̞̾̿̈́͜е̸͙͖͍̓̔с̸͍͙̙͆̀̾ь̴̟͕̺̓͋͛ к̴̺͖͔̿̈́ б̵͖̻͎͐̓͘о̵̦͕̦͊͘͠р̴̢̻̞̔̈́̚т̴͉̦̪͒̕͠о̸̞̺͊̾в̸͕͍̠̽̒̈́о̸͇̫̓͘͠м̸̡͖̪̓͆͊у̸̡͍͒͛̿ т̸͉̼̐͐͝е̴̡͓̞͋͠х̴͖̙͖̚͘͝н̵͍͙̒̐̚͜и̴̻̻͇̽͋̚к̴̪͖̔̐͐у̸͚̪̼̀͋̾.̵͍͚͔͑͒̽ <br> <i>██.̴͉̝̠̔͆͠0̸̞͍͓̐̽̈́9̵̢͍͙͋͛͊.̴͍͉̀͛2̸̟͔̘̽̀̈́4̴͖͔͙̓͝͝6̴̼͔̽͑͝7̵̟̓͝͝</i> -̸̟͕͆́̓ О̵̡͖̘̓̔͝б̴̼̪̈́̽н̸̘̺͓͑̀͘а̵͇̦̓̾̚͜р̴͖̞͊̓̚ӱ̸̼̻́̔̿͜ж̴̟͚̒͌͝е̵̪̫̓͆͘н̵͍̈́̓͛͜ с̴̢̢̠͌̓͑б̴͚͎̞̔͐͝о̵͓͔̝̿͘͠й̵̺͚͙͒͝ с̵̘͇̾̽͜͠и̵̻̺͓̾̒̕с̴̻̝̀͋̚т̵̦̼͚͊̓̚е̴̟͇̼͌̈́̀м̸̝̪͕͌̾̒ы̴̫̟͓̓͛̓.̵͍͚̪̓͘͝ О̸̦̙̔̓̈́б̵̡͔̪͑̿̿р̵̫̪͙̽͋͑а̴̫͓̠̾̈́͘т̴̡͓͙̔̚͝и̵͎͙͉͛̈́͛т̵͙̼͉́̈́͒е̵͕͓̦͒͘͝с̵̪̘͍̔̿̈́ь̸̠̙͎̓̈́ к̵̡̡̙͆͒͝ б̵̡̻̚͝о̸͙͒͊̕͜р̴̪̟̺̿͑͝т̵̘͔͚́̐̕о̵̢̘͍͘̚͝в̵̡̫̙̀͌̚о̵͔̟̺̀̐̿м̸͍͓͔́̿̓у̵̢̡̦̐̈́̒ т̵̺̘͍͒̕͘е̵̞̺͇͐̔̕х̵̠͎͍͊̈́͒н̵̫͕̟̿̚и̵̙̼̿͜͝͝к̸͕̻̟̓͊͒у̸͓̠̘̔̿̿.̴̡͖̀͐̿ <br> .ʎdoꓕɐdꓕɔиниᥕჩɐ ʎᥕoнᥕǝꓕɔиɔ ʞ ৭ɔǝꓕиꓕɐdܦО .ыᥕǝꓕɔиɔ и̯oܦɔ нǝжʎdɐнܦО - <i>↋↊0↊.↋0.↋0</i> <br> <i>██.丨己.己丩67</i> - 乃ы尸闩⻏廾и⻏闩廾и🝗 爪ㄖ⼭廾ㄖ⼕ти ⼕и⼕т🝗爪ы. 闩⻏闩尸ий廾ый ⼕石尸ㄖ⼕ ⼕长ㄖ尸ㄖ⼕ти ⼕⻏🝗尸〤⼕⻏🝗тㄖ⻏ы〤 具⻏и⺁闩т🝗人🝗й. <br> <i>██.██.2567</i> - Выход из сверхсветового коридора. координаты ████,████,██ - Поле астериодов. <br> <i>██.██.2567</i> - Обнаружено физическое нарушение целостности двигательного отсека. <br> <i>██.██.2567</i> - Обнаружены разгерметизации левого борта: двигательный отсек, секция ЭМР-2, левый ангар. <br> <i> ██.██.██67 </i> - Нарушение целостности корпуса судна. Запуск протокола 'Черный Ящик' <br> ██.██.████ - Н███шен█е це██ст███ти к█рп█с█. З█п█ск пр███кола 'Шифрат█р.NT' <br> ██.██.████ - █████████████████████████████. █████████████████████████... <br> ██.██.████ - ███████ ██████████ ███ - ███████ ████ █████: '███████████ ██████' <br> ██████████ - ████████████████████████████████...</p>"

/obj/item/paper/spacebattle/voxcap // Капитан говнит экипаж на воксовском
	info = "<p> <i> Дешифрованное сообщение с вокс-пиджина </i> <br> К'цай, ты не поверишь куда я попал! Эти пылевые мешки все-таки позвали меня рулить их кораблем! Говорят, у нас будет нормальное дело на поживится всяким НТшным добром, готовьте скипджек, вышлю координаты как будем собираться возвращаться. </p>"

/obj/item/paper/spacebattle/voxcap1 // Экипаж говнит вокса-офицера
	info = "<p> Командир, мы вообще не поняли подобного юмора - вокс?! Мы понимаем, что эти чашуйчатые говнюки грабят только так, это у них в крови или той хрени, что у них течет в жилах, но ВОКС-КАПИТАН? Мы не будем терпеть этого мудака, он успел обосрать половину составва, называя то лысыми, то пылевиками, то еще как-то, если он выпрется из каюты и еще выдаст хоть какую-то хрень на своем чик-чирике мы его порешаем на месте! </p>"

/obj/item/paper/spacebattle/voxcap2 // Механик центрального корабля
	info = "<p> <center> <b> Личная запись </b> </center> <br> <b> Бортовой техник: </b> Позывной '12й' <br> Эта крыса чашуйчатая опять полезла ко мне в ангар жрать запчасти от моих дронов. Я не могу грубить старшему, но у меня так половина дронов из строя выйдет, если эта скатина продолжит искать 'вкикикусненькикое' в них! Слыхал, что другие тоже недовольны положением, оно и видно - такую хрень поставили за главного! </p> "

/obj/item/paper/check/spacebattle/voxcap3 // Бортовой журнал центрального корабля
	info = "<p> <center> <b> <i> Обрывок бортового журнала </i> </b> </center> <br> На корабле стоит напряженная атмосфера. Почти весь экипаж недоволен новым капитаном-воксом. Абсолютно непонятно где он раздобыл нужные документы, скорее всего, украл у какого-нибудь офицера. Из-за системы скрытых званий мы не можем точно интендифицировать подлинность его статуса. Нас выслали на срочное дело и не было времени на разборки, ввиду этого чашуйчатый стал руководить данным рейдом. По завершению задачи, кикпитан либо полетит за борт, либо отправится в самую темную задницу для выяснения откуда он достал удостоверение офицера. </p>"

/obj/item/paper/spacebattle/mimics // Секретное биоружие-мимики
	info = "<p> <center> <b> Личная запись </b> </center> <br> <b> Капитан рейдерского грузового судна: </b> 'Легкий' Пит <br> Недавно вафельные подогнали разработку биотехов - живые ящики! Говорят, что сами возят в таких товар, мол такие вора быстрее загрызут, чем он поймет что это не обычный ящик. Они как-то надрессировали эти штуки и говорят, что кидаются они только на чужих, я пока не пробовал, да и желания нет. Надеюсь, они не втюхали нам обычные ящики по завышенной цене. </p>"

// Spawners

/obj/effect/landmark/awaymissions/spacebattle/mine_spawner
	icon = 'icons/obj/spacebattle.dmi'
	icon_state = "spawner_mine"
	canmove = FALSE
	var/id = null
	var/triggered = FALSE
	var/faction = null
	var/safety_z_check = TRUE

/obj/effect/landmark/awaymissions/spacebattle/mob_spawn
	name = "spawner"
	icon = 'icons/obj/spacebattle.dmi'
	var/id = null
	var/syndi_mob = null

/obj/effect/landmark/awaymissions/spacebattle/mine_spawner/Crossed(AM as mob|obj, oldloc)
	if(!isliving(AM))
		return
	var/mob/living/M = AM
	if(faction && (faction in M.faction))
		return
	triggerlandmark(M)

/obj/effect/landmark/awaymissions/spacebattle/mine_spawner/proc/triggerlandmark(mob/living/victim)
	if(triggered)
		return
	victim.spawn_alert(victim)
	for(var/obj/effect/landmark/awaymissions/spacebattle/mob_spawn/S in GLOB.landmarks_list)
		if(safety_z_check && S.z != z)
			continue
		if(S.id == id)
			new S.syndi_mob(get_turf(S))
			triggered = TRUE
	qdel(src)

/mob/living/proc/spawn_alert(atom/A) // Вызывает появление восклицательного знака над головой при наступании на маркер
	var/image/I
	I = image('icons/obj/cardboard_boxes.dmi', A, "cardboard_special", A.layer+1)
	var/list/viewing = list()
	for(var/mob/M in viewers(A))
		if(M.client)
			viewing |= M.client
	flick_overlay(I,viewing,8)
	I.alpha = 0
	animate(I, pixel_z = 32, alpha = 255, time = 5, easing = ELASTIC_EASING)

/obj/effect/landmark/awaymissions/spacebattle/mob_spawn/melee
	name = "melee"
	icon_state = "melee"
	syndi_mob = /mob/living/simple_animal/hostile/syndicate/melee/autogib/spacebattle

/obj/effect/landmark/awaymissions/spacebattle/mob_spawn/melee_space
	name = "melee_space"
	icon_state = "space_melee"
	syndi_mob = /mob/living/simple_animal/hostile/syndicate/melee/space/autogib/spacebattle

/obj/effect/landmark/awaymissions/spacebattle/mob_spawn/ranged
	name = "ranged"
	icon_state = "range"
	syndi_mob = /mob/living/simple_animal/hostile/syndicate/ranged/autogib/spacebattle

/obj/effect/landmark/awaymissions/spacebattle/mob_spawn/ranged_space
	name = "ranged_space"
	icon_state = "space_range"
	syndi_mob = /mob/living/simple_animal/hostile/syndicate/ranged/space/autogib/spacebattle

/obj/effect/landmark/awaymissions/spacebattle/mob_spawn/drone
	name = "drone"
	icon_state = "drone"
	syndi_mob = /mob/living/simple_animal/hostile/malf_drone/spacebattle

// Enemys

/mob/living/simple_animal/hostile/syndicate
	var/synmobdrop //Обычный лут, дропается со всех
	var/SynSpace //Выпадение бладрига
	var/SynMelee //Лут с милишников
	var/SynRange //Лут с дальников

/mob/living/simple_animal/hostile/syndicate/Initialize()
	var/rollforloot = rand(1,50) //Лучшего варианта я не нашел
	switch(rollforloot)
		if(1 to 8) // 16%
			pick(synmobdrop = /obj/item/reagent_containers/food/snacks/syndicake,
				synmobdrop = /obj/item/poster/random_contraband)
		if(8 to 15) // 14%
			pick(synmobdrop = /obj/item/clothing/mask/gas/syndicate,
				synmobdrop = /obj/item/tank/internals/emergency_oxygen/engi/syndi)
		if(15 to 20) // 10%
			pick(synmobdrop = /obj/item/target/syndicate,
				synmobdrop = /obj/item/deck/cards/syndicate,
				synmobdrop = /obj/item/kitchen/knife/combat/survival)
		if(20 to 24) // 8%
			pick(synmobdrop = /obj/item/clothing/glasses/night,
				synmobdrop = /obj/item/stack/medical/bruise_pack,
				synmobdrop = /obj/item/stack/medical/ointment)
		if(24 to 27) // 6%
			pick(synmobdrop = /obj/item/reagent_containers/food/pill/patch/styptic/small,
				synmobdrop = /obj/item/reagent_containers/food/pill/patch/silver_sulf/small,
				synmobdrop = /obj/item/reagent_containers/food/snacks/donkpocket)
		if(27 to 29) // 4%
			pick(synmobdrop = /obj/item/reagent_containers/food/pill/patch/styptic,
				synmobdrop = /obj/item/reagent_containers/food/pill/patch/silver_sulf,
				synmobdrop = /obj/item/storage/backpack/duffel/syndie/surgery,
				synmobdrop = /obj/item/clothing/gloves/combat)
		if(30) // 2%
			pick(synmobdrop = /obj/item/storage/fancy/cigarettes/cigpack_syndicate,
				synmobdrop = /obj/item/reagent_containers/food/snacks/syndidonkpocket,
				synmobdrop = /obj/item/card/id/syndicate)
		else // 40%
			synmobdrop = /obj/item/ammo_casing/c10mm
	. = ..()

/mob/living/simple_animal/hostile/syndicate/Initialize()
	switch(rand(1,33))
		if(1) // 3%
			SynSpace = /obj/item/clothing/suit/space/hardsuit/syndi
		else
			SynSpace = /obj/item/ammo_casing/c10mm
	return ..()

/mob/living/simple_animal/hostile/syndicate/melee/Initialize()
	switch(rand(1,100))
		if(1) // 1%
			SynMelee = /obj/item/melee/energy/sword/saber
		if(2 to 3) // 2%
			SynMelee = /obj/item/shield/energy/syndie
		else
			SynMelee = /obj/item/ammo_casing/c10mm
	return ..()

/mob/living/simple_animal/hostile/syndicate/ranged/Initialize()
	switch(rand(rand(1,100)))
		if(25 to 35) // 10%
			SynRange = /obj/item/ammo_box/magazine/m10mm
		if(35 to 40) // 5%
			SynRange = /obj/item/gun/projectile/automatic/pistol
		if(40 to 47) // 7%
			SynRange = /obj/item/clothing/accessory/holster
		if(47 to 50) // 3%
			SynRange = /obj/item/ammo_box/magazine/smgm45
		if(50 to 51) // 1%
			SynRange = /obj/item/gun/projectile/automatic/c20r
		else
			SynRange = /obj/item/ammo_casing/c10mm
	.=..()

/mob/living/simple_animal/hostile/syndicate/melee/autogib/spacebattle
	damage_coeff = list("brute" = 0.8, "fire" = 0.8, "tox" = 1, "clone" = 2, "stamina" = 0, "oxy" = 0.5)
	melee_damage_type = BURN
	attack_sound = 'sound/weapons/saberon.ogg'

/mob/living/simple_animal/hostile/syndicate/melee/autogib/spacebattle/Initialize()
	. = ..()
	loot = list(/obj/effect/decal/cleanable/ash, synmobdrop, SynMelee)
	return .

/mob/living/simple_animal/hostile/syndicate/melee/space/autogib/spacebattle
	damage_coeff = list("brute" = 0.8, "fire" = 0.8, "tox" = 1, "clone" = 2, "stamina" = 0, "oxy" = 0)
	melee_damage_type = BURN
	attack_sound = 'sound/weapons/saberon.ogg'

/mob/living/simple_animal/hostile/syndicate/melee/space/autogib/spacebattle/Initialize()
	. = ..()
	loot = list(/obj/effect/decal/cleanable/ash, synmobdrop, SynMelee, SynSpace)
	return .

/mob/living/simple_animal/hostile/syndicate/ranged/autogib/spacebattle
	damage_coeff = list("brute" = 1, "fire" = 1, "tox" = 1, "clone" = 2, "stamina" = 0, "oxy" = 0.5)

/mob/living/simple_animal/hostile/syndicate/ranged/autogib/spacebattle/Initialize()
	. = ..()
	loot = list(/obj/effect/decal/cleanable/ash, synmobdrop, SynRange)
	return .

/mob/living/simple_animal/hostile/syndicate/ranged/space/autogib/spacebattle

/mob/living/simple_animal/hostile/syndicate/ranged/space/autogib/spacebattle/Initialize()
	. = ..()
	loot = list(/obj/effect/decal/cleanable/ash, synmobdrop, SynRange, SynSpace)
	return .


/mob/living/simple_animal/hostile/malf_drone/spacebattle
	icon = 'icons/mob/custom_synthetic/custom-synthetic.dmi'
	icon_state = "wisewill-Combat-roll"
	icon_living = "wisewill-Combat-roll"
	icon_gib = "drone_dead"
	health = 50
	maxHealth = 50
	faction = list("syndicate")
	projectiletype = /obj/item/projectile/beam/laser/syndrone

/obj/item/projectile/beam/laser/syndrone
	name = "light immolation beam"
	damage = 8
	icon_state = "scatterlaser"
	eyeblur = 2 SECONDS

/mob/living/simple_animal/hostile/malf_drone/spacebattle/drop_loot()
	do_sparks(3, 1, src)
	var/turf/T = get_turf(src)

	//shards
	var/obj/O = new /obj/item/shard(T)
	step_to(O, get_turf(pick(view(7, src))))
	if(prob(50))
		O = new /obj/item/shard(T)
		step_to(O, get_turf(pick(view(7, src))))
	if(prob(25))
		O = new /obj/item/shard(T)
		step_to(O, get_turf(pick(view(7, src))))

	//rods
	var/obj/item/stack/K = new /obj/item/stack/rods(T, rand(1,5))
	step_to(K, get_turf(pick(view(7, src))))
	K.update_icon()

	//plastitanuim
	K = new /obj/item/stack/sheet/mineral/plastitanium(T, rand(1,5))
	step_to(K, get_turf(pick(view(7, src))))
	K.update_icon()

	//dummy circuit board
	K = new /obj/item/airlock_electronics(T)
	step_to(K, get_turf(pick(view(7, src))))
	K.icon = 'icons/obj/doors/door_assembly.dmi'
	K.icon_state = "door_electronics_smoked"
	var/randtech = rand(1,100)
	switch(randtech)
		if(1 to 10) // 10%
			K.name = "Burned Drone CPU motherboard"
			K.origin_tech = "programming=[rand(1,4)]"
		if(10 to 20) // 10%
			K.name = "Burned Drone neural interface"
			K.origin_tech = "biotech=[rand(1,4)]"
		if(21 to 30) // 10%
			K.name = "Burned Dronesuspension processor"
			K.origin_tech = "magnets=[rand(1,4)]"
		if(31 to 40) // 10%
			K.name = "Burned Drone shielding controller"
			K.origin_tech = "bluespace=[rand(1,4)]"
		if(41 to 50) // 10%
			K.name = "Burned Drone power capacitor"
			K.origin_tech = "powerstorage=[rand(1,4)]"
		if(51 to 60) // 10%
			K.name = "Burned Drone hull reinforcer"
			K.origin_tech = "materials=[rand(1,4)]"
		if(61 to 70) // 10%
			K.name = "Burned Drone auto-repair system"
			K.origin_tech = "engineering=[rand(1,4)]"
		if(71 to 80) // 10%
			K.name = "Burned Drone plasma overcharge counter"
			K.origin_tech = "plasmatech=[rand(1,4)]"
		if(81 to 90) // 10%
			K.name = "Burned Drone targetting circuitboard"
			K.origin_tech = "combat=[rand(1,4)]"
		if(91 to 100) // 10%
			K.name = "Corrupted drone morality core"
			K.origin_tech = "syndicate=[rand(1,3)]"


/mob/living/simple_animal/hostile/malf_drone/spacebattle/update_icons()
	if(passive_mode)
		icon_state = "wisewill-Combat"
	else if(health / maxHealth > 0.9)
		icon_state = "wisewill-Combat-roll2"
	else if(health / maxHealth > 0.5)
		icon_state = "wisewill-Combat-roll"
	else if(health / maxHealth < 0.5)
		icon_state = "wisewill-Combat"

/mob/living/simple_animal_hostile/mimic/spacebattleshiz // ящики, при прикосновении заменяются на мимиков из него дропается ящик с лутом

// Corpse and loot

/obj/effect/mob_spawn/human/corpse/spacebattle
	var/list/pocketloot = list(/obj/item/storage/fancy/cigarettes/cigpack_robust,
		/obj/item/storage/fancy/cigarettes/cigpack_uplift,
		/obj/item/storage/fancy/cigarettes/cigpack_random,
		/obj/item/cigbutt,
		/obj/item/clothing/mask/cigarette/menthol,
		/obj/item/clothing/mask/cigarette,
		/obj/item/clothing/mask/cigarette/random,
		/obj/item/lighter/random,
		/obj/item/assembly/igniter,
		/obj/item/storage/box/matches,
		/obj/item/match,
		/obj/item/reagent_containers/food/snacks/donut,
		/obj/item/reagent_containers/food/snacks/candy/candybar,
		/obj/item/reagent_containers/food/snacks/tastybread,
		/obj/item/reagent_containers/food/drinks/cans/dr_gibb,
		/obj/item/pen,
		/obj/item/screwdriver,
		/obj/item/stack/tape_roll,
		/obj/item/radio,
		/obj/item/coin,
		/obj/item/coin/twoheaded,
		/obj/item/coin/iron,
		/obj/item/coin/silver,
		/obj/item/flashlight,
		/obj/item/stock_parts/cell,
		/obj/item/paper/crumpled,
		/obj/item/extinguisher/mini,
		/obj/item/deck/cards,
		/obj/item/reagent_containers/food/pill/salbutamol,
		/obj/item/reagent_containers/food/pill/patch/silver_sulf/small,
		/obj/item/reagent_containers/food/pill/patch/styptic/small,
		/obj/item/reagent_containers/food/pill/salicylic,
		/obj/item/stack/medical/bruise_pack,
		/obj/item/stack/medical/ointment,
		/obj/item/tank/internals/emergency_oxygen,
		/obj/item/weldingtool/mini,
		/obj/item/flashlight/flare/glowstick/emergency,
		/obj/item/flashlight/flare,
		/obj/item/toy/crayon/white,
		)

/obj/effect/mob_spawn/human/corpse/spacebattle/Initialize()
	l_pocket = pick(pocketloot)
	r_pocket = pick(pocketloot)
	return ..()

/obj/effect/mob_spawn/human/corpse/spacebattle/assistant
	name = "Dead Civilian"
	mob_name = "Ship Personnel"
	id = /obj/item/card/id/away/old
	uniform = /obj/item/clothing/under/color/random
	shoes = /obj/item/clothing/shoes/black


/obj/effect/mob_spawn/human/corpse/spacebattle/security
	name = "Dead Officer"
	mob_name = "Ship Officer"
	id = /obj/item/card/id/away/old/sec
	uniform = /obj/item/clothing/under/retro/security
	belt = /obj/item/clothing/accessory/holster/waist
	suit = /obj/item/clothing/suit/armor/vest/security
	shoes = /obj/item/clothing/shoes/jackboots
	head = /obj/item/clothing/head/helmet
	gloves = /obj/item/clothing/gloves/fingerless
	back = /obj/item/storage/backpack/satchel_sec

/obj/effect/mob_spawn/human/corpse/spacebattle/security/Initialize()
	var/secgun = rand(1,10)
	switch(secgun)
		if(1 to 7) //70%
			suit_store = /obj/item/gun/projectile/automatic/pistol/enforcer/lethal
			backpack_contents = list(
				/obj/item/storage/box/survival = 1,
				/obj/item/ammo_box/magazine/enforcer/lethal = 1
				)
		if(8 to 9) //20%
			suit_store = /obj/item/gun/projectile/automatic/wt550
			backpack_contents = list(
				/obj/item/storage/box/survival = 1,
				/obj/item/ammo_box/magazine/wt550m9 = 1
				)
		if(10) //10%
			suit_store = /obj/item/gun/projectile/shotgun/riot/buckshot
			backpack_contents = list(
				/obj/item/storage/box/survival = 1,
				/obj/item/ammo_box/shotgun/buck = 1
				)
	return ..()

/obj/effect/mob_spawn/human/corpse/spacebattle/engineer
	name = "Dead Engineer"
	mob_name = "Engineer"
	outfit = /datum/outfit/ancient_eng

/datum/outfit/ancient_eng
	id = /obj/item/card/id/away/old/eng
	uniform = /obj/item/clothing/under/retro/engineering
	belt = /obj/item/storage/belt/utility/full
	suit = /obj/item/clothing/suit/storage/hazardvest
	shoes = /obj/item/clothing/shoes/workboots
	mask = /obj/item/clothing/mask/gas
	head = /obj/item/clothing/head/hardhat/orange
	glasses = /obj/item/clothing/glasses/meson
	suit_store = /obj/item/tank/internals/emergency_oxygen/engi
	gloves = /obj/item/clothing/gloves/color/fyellow/old
	back = /obj/item/storage/backpack/duffel/engineering

/datum/outfit/ancient_eng/pre_equip()
	. = ..()
	var/engstaff = rand(1,3)
	switch(engstaff)
		if(1)
			backpack_contents = list(
			/obj/item/clothing/head/welding = 1,
			/obj/item/weldingtool/largetank = 1,
			/obj/item/stack/sheet/metal{amount = 10} = 1,
			/obj/item/stack/rods{amount = 3} = 1
			)
		if(2)
			backpack_contents = list(
			/obj/item/apc_electronics = 1,
			/obj/item/stock_parts/cell/high = 1,
			/obj/item/t_scanner = 1,
			/obj/item/stack/cable_coil{amount = 7} = 1
			)
		if(3)
			backpack_contents = list(
			/obj/item/storage/briefcase/inflatable = 1,
			/obj/item/stack/sheet/glass{amount = 5} = 1,
			/obj/item/grenade/gas/oxygen = 1,
			/obj/item/analyzer = 1
			)

/obj/effect/mob_spawn/human/corpse/spacebattle/engineer/space
	outfit = /datum/outfit/ancient_eng/suit

/datum/outfit/ancient_eng/suit
	suit = /obj/item/clothing/suit/space/hardsuit/ancient
	toggle_helmet = TRUE
	shoes = /obj/item/clothing/shoes/magboots

/obj/effect/mob_spawn/human/corpse/spacebattle/medic
	name = "Dead Medic"
	mob_name = "Medic"
	id = /obj/item/card/id/away/old/med
	uniform = /obj/item/clothing/under/retro/medical
	suit = /obj/item/clothing/suit/storage/labcoat
	shoes = /obj/item/clothing/shoes/white
	id = /obj/item/card/id/medical
	back = /obj/item/storage/backpack/satchel_med

/obj/effect/mob_spawn/human/corpse/spacebattle/medic/Initialize()
	backpack_contents = list(
		/obj/item/storage/firstaid/regular = 1,
		/obj/item/storage/pill_bottle/random_drug_bottle = 1,
		/obj/item/reagent_containers/glass/bottle/random_reagent = 1,
		/obj/item/reagent_containers/glass/bottle/random_chem = 1,
		)
	return ..()

/obj/effect/mob_spawn/human/corpse/spacebattle/bridgeofficer
	name = "Bridge Officer"
	mob_name = "Bridge Officer"
	id = /obj/item/card/id/away/old/sec
	uniform = /obj/item/clothing/under/rank/blueshield{name = "Bridge Officer uniform"}
	belt = /obj/item/clothing/accessory/holster/waist
	suit = /obj/item/clothing/suit/armor/vest/security
	shoes = /obj/item/clothing/shoes/jackboots
	head = /obj/item/clothing/head/helmet/night
	gloves = /obj/item/clothing/gloves/fingerless
	back = /obj/item/storage/backpack/satchel

/obj/effect/mob_spawn/human/corpse/spacebattle/bridgeofficer/Initialize()
	backpack_contents = list(
		/obj/item/reagent_containers/food/pill/patch/silver_sulf/small = 1,
		/obj/item/reagent_containers/food/pill/patch/styptic/small = 1,
		/obj/item/stock_parts/cell/high = 1,
		/obj/item/ammo_box/shotgun/buck = 1
		)
	return ..()

/obj/effect/mob_spawn/human/corpse/spacebattle/scientist
	name = "Dead Scientist"
	mob_name = "Scientist"
	id = /obj/item/card/id/away/old/sci
	uniform = /obj/item/clothing/under/retro/science
	shoes = /obj/item/clothing/shoes/black
	suit = /obj/item/clothing/suit/storage/labcoat/science


/obj/item/clothing/suit/space/hardsuit/syndi/damaged
	name = "damaged blood-red hardsuit"
	desc = "Damaged advanced hardsuit designed for work in special operations. There are a many patches visible on the suit. Its mode switcher system looks damaged and forced in travel mode. Property of Gorlex Marauders."
	armor = list("melee" = 30, "bullet" = 40, "laser" = 20, "energy" = 20, "bomb" = 30, "bio" = 100, "rad" = 50, "fire" = 50, "acid" = 90)
	w_class = WEIGHT_CLASS_NORMAL
	icon_state = "hardsuit1-syndi"
	on = TRUE
	helmettype = /obj/item/clothing/head/helmet/space/hardsuit/syndi/damaged
	actions_types = list(/datum/action/item_action/toggle_helmet)


/obj/item/clothing/head/helmet/space/hardsuit/syndi/damaged
	icon_state = "hardsuit1-syndi"
	item_state = "syndie_helm"
	actions_types = list(/datum/action/item_action/toggle_helmet_light)
	on = TRUE


/obj/item/clothing/head/helmet/space/hardsuit/syndi/damaged/update_icon_state()
	return


/obj/item/clothing/head/helmet/space/hardsuit/syndi/damaged/adjust_headgear(mob/living/carbon/human/user, toggle = FALSE)
	if(user)
		to_chat(user, span_notice("You cant switch your hardsuit to combat mode."))
		playsound(user, 'sound/machines/buzz-two.ogg', 50, TRUE)
		return
	..()

